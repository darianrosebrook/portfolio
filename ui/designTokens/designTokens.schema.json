{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://darianrosebrook.com/ui/designTokens/designTokens.schema.json",
  "title": "Design Tokens Schema",
  "description": "A JSON schema for validating design token files according to the W3C Design Tokens specification with custom extensions",
  "type": "object",
  "$defs": {
    "token": {
      "type": "object",
      "properties": {
        "$value": {
          "description": "The value of the design token",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "number"
            },
            {
              "type": "boolean"
            },
            {
              "type": "array"
            },
            {
              "type": "object"
            }
          ]
        },
        "$type": {
          "description": "The type of the design token",
          "type": "string",
          "enum": [
            "color",
            "dimension",
            "fontFamily",
            "fontWeight",
            "duration",
            "cubicBezier",
            "number",
            "border",
            "transition",
            "shadow",
            "gradient",
            "typography",
            "opacity",
            "spacing",
            "radius",
            "elevation",
            "motion",
            "layout",
            "interaction",
            "string",
            "keyframes",
            "strokeStyle"
          ]
        },
        "$description": {
          "description": "A human-readable description of the design token",
          "type": "string"
        },
        "$extensions": {
          "description": "Platform-specific extensions",
          "type": "object",
          "properties": {
            "design": {
              "type": "object",
              "description": "Design system specific extensions",
              "properties": {
                "paths": {
                  "type": "object",
                  "description": "Theme-specific token references for light/dark modes",
                  "properties": {
                    "light": {
                      "type": "string",
                      "description": "Token reference for light mode (e.g., \"{core.color.palette.neutral.600}\")",
                      "pattern": "^\\{[^}]+\\}$"
                    },
                    "dark": {
                      "type": "string",
                      "description": "Token reference for dark mode (e.g., \"{core.color.palette.neutral.300}\")",
                      "pattern": "^\\{[^}]+\\}$"
                    }
                  },
                  "additionalProperties": true
                },
                "calc": {
                  "type": "string",
                  "description": "CSS calc() expression with token substitution (e.g., \"calc({spacing.size.04} + 2px)\")",
                  "pattern": "^calc\\(.*\\{.*\\}.*\\)$"
                }
              },
              "additionalProperties": true
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "group": {
      "type": "object",
      "properties": {
        "$type": {
          "description": "The type inherited by all tokens in this group",
          "type": "string",
          "enum": [
            "color",
            "dimension",
            "fontFamily",
            "fontWeight",
            "duration",
            "cubicBezier",
            "number",
            "border",
            "transition",
            "shadow",
            "gradient",
            "typography",
            "opacity",
            "spacing",
            "radius",
            "elevation",
            "motion",
            "layout",
            "interaction",
            "string",
            "keyframes",
            "strokeStyle"
          ]
        },
        "$description": {
          "description": "A human-readable description of the token group",
          "type": "string"
        }
      },
      "patternProperties": {
        "^(?!\\$).*": {
          "anyOf": [
            {
              "$ref": "#/$defs/token"
            },
            {
              "$ref": "#/$defs/group"
            },
            {
              "type": "object"
            }
          ]
        }
      },
      "additionalProperties": true
    },
    "colorToken": {
      "allOf": [
        {
          "$ref": "#/$defs/token"
        },
        {
          "properties": {
            "$type": {
              "const": "color"
            },
            "$value": {
              "oneOf": [
                {
                  "type": "string",
                  "pattern": "^#[0-9a-fA-F]{3,8}$"
                },
                {
                  "type": "string",
                  "pattern": "^rgb\\("
                },
                {
                  "type": "string",
                  "pattern": "^hsl\\("
                },
                {
                  "type": "string",
                  "pattern": "^oklch\\("
                },
                {
                  "type": "string",
                  "pattern": "^\\{[^}]+\\}$"
                }
              ]
            }
          }
        }
      ]
    },
    "dimensionToken": {
      "allOf": [
        {
          "$ref": "#/$defs/token"
        },
        {
          "properties": {
            "$type": {
              "const": "dimension"
            },
            "$value": {
              "oneOf": [
                {
                  "type": "string",
                  "pattern": "^[0-9]+(px|rem|em|%|vh|vw|vmin|vmax)$"
                },
                {
                  "type": "number"
                },
                {
                  "type": "string",
                  "pattern": "^\\{[^}]+\\}$"
                }
              ]
            }
          }
        }
      ]
    },
    "numberToken": {
      "allOf": [
        {
          "$ref": "#/$defs/token"
        },
        {
          "properties": {
            "$type": {
              "const": "number"
            },
            "$value": {
              "oneOf": [
                {
                  "type": "number"
                },
                {
                  "type": "string",
                  "pattern": "^\\{[^}]+\\}$"
                }
              ]
            }
          }
        }
      ]
    },
    "fontFamilyToken": {
      "allOf": [
        {
          "$ref": "#/$defs/token"
        },
        {
          "properties": {
            "$type": {
              "const": "fontFamily"
            },
            "$value": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "string",
                  "pattern": "^\\{[^}]+\\}$"
                }
              ]
            }
          }
        }
      ]
    },
    "shadowToken": {
      "allOf": [
        {
          "$ref": "#/$defs/token"
        },
        {
          "properties": {
            "$type": {
              "const": "shadow"
            },
            "$value": {
              "oneOf": [
                {
                  "type": "object",
                  "properties": {
                    "offsetX": {
                      "type": "string"
                    },
                    "offsetY": {
                      "type": "string"
                    },
                    "blur": {
                      "type": "string"
                    },
                    "spread": {
                      "type": "string"
                    },
                    "color": {
                      "type": "string"
                    },
                    "inset": {
                      "type": "boolean"
                    }
                  },
                  "required": ["offsetX", "offsetY", "blur", "color"]
                },
                {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "offsetX": {
                        "type": "string"
                      },
                      "offsetY": {
                        "type": "string"
                      },
                      "blur": {
                        "type": "string"
                      },
                      "spread": {
                        "type": "string"
                      },
                      "color": {
                        "type": "string"
                      },
                      "inset": {
                        "type": "boolean"
                      }
                    },
                    "required": ["offsetX", "offsetY", "blur", "color"]
                  }
                },
                {
                  "type": "string",
                  "pattern": "^\\{[^}]+\\}$"
                }
              ]
            }
          }
        }
      ]
    }
  },
  "patternProperties": {
    "^(?!\\$).*": {
      "anyOf": [
        {
          "$ref": "#/$defs/token"
        },
        {
          "$ref": "#/$defs/group"
        },
        {
          "type": "object"
        }
      ]
    }
  },
  "additionalProperties": true
}
