# ============================================================
# Portfolio Git Hooks Auto-Install
# Add this entire section to your ~/.zshrc file
# ============================================================

# Auto-install git hooks when entering portfolio directory
PORTFOLIO_DIR="$HOME/Desktop/Projects/portfolio"

# Function to check and install hooks
install-portfolio-hooks-if-needed() {
  if [ -d "$PORTFOLIO_DIR/.git" ] && [[ "$PWD" == "$PORTFOLIO_DIR"* ]]; then
    if [ ! -f "$PORTFOLIO_DIR/.git/hooks/pre-commit" ] || \
       [ "$PORTFOLIO_DIR/scripts/setup-hooks.sh" -nt "$PORTFOLIO_DIR/.git/hooks/pre-commit" ]; then
      echo "ðŸ”§ Installing git hooks for portfolio..."
      (cd "$PORTFOLIO_DIR" && npm run setup:hooks > /dev/null 2>&1)
    fi
  fi
}

# Install hooks when changing directories (zsh-specific)
autoload -U add-zsh-hook
add-zsh-hook chpwd install-portfolio-hooks-if-needed

# Install hooks for current directory if we're already in portfolio
install-portfolio-hooks-if-needed

# Manual command to install/update hooks
alias portfolio-hooks-update='cd "$HOME/Desktop/Projects/portfolio" && npm run setup:hooks'

# ============================================================

